;; gorilla-repl.fileformat = 1

;; **
;;; # CIM Portfolio
;; **

;; **
;;; ### Required packages
;; **

;; @@
(ns cim_portfolio.portfolio
  (:require [cim_portfolio.util :as util]
            [cim_portfolio.yfinanceclient :as client]
            [cim_portfolio.plot :as plot]
            [clojure.math :as math]
            ))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; ### Portfolio Analysis Helper Functions
;; **

;; @@
;; Computes arithmetic, log, and cumulative return for a given list of prices
(defn calculate-returns [prices]
  (let [price-changes (map #(double (/ (second %) (first %))) (partition 2 1 prices))
        arithmetic-returns (mapv #(- % 1.0) price-changes)
        log-returns (mapv #(Math/log %) price-changes)
        cumulative-log-return (reduce + log-returns)]
    {
     :cumulative-return cumulative-log-return
     :arithmetic-returns arithmetic-returns
     :log-returns log-returns
     }))

;; Variation of the above function - additionally associates the returns with their corresponding date
(defn calculate-returns-with-corresponding-date [prices dates]
  (let [price-changes (map #(double (/ (second %) (first %))) (partition 2 1 prices))
        arithmetic-returns (mapv #(- % 1.0) price-changes)
        log-returns (mapv #(Math/log %) price-changes)
        cumulative-log-return (reduce + log-returns)]
    {
     :cumulative-return cumulative-log-return
     :arithmetic-returns (util/sort-map-by-date (zipmap (rest dates) arithmetic-returns))
     :log-returns (util/sort-map-by-date (zipmap (rest dates) log-returns))
     }))

;; Calculates portfolio return - accepts map {:stock cash-invested} and stock-performance generated by calculate-returns
(defn calculate-portfolio-return [cash-invested returns]
  (let [total-investment (apply + (vals cash-invested))]
    (->> cash-invested
         (map (fn [[security invested]]
                (let [weight (/ invested total-investment)
                      return (:cumulative-return (get returns security))]
                  (* weight return))))
         (apply +))))

;; Calculates cumulative return UP TILL a given date
(defn get-cumulative-return-till-given-date [cumulative-returns date]
  (util/sum-up-to-key date cumulative-returns)
)

;; Only calculates portfolio return up till a given date
(defn calculate-portfolio-return-for-given-date [cash-invested returns date]
  (let [total-investment (apply + (vals cash-invested))]
    (->> cash-invested
         (map (fn [[security invested]]
                (let [weight (/ invested total-investment)
                      return (get-cumulative-return-till-given-date (:log-returns (get returns security)) date)
                     ]
                  (* weight return))))
         (apply +))))

; Calculates the annualized return of the portfolio (accepts the starting value, ending value of portfolio, the start and end date)
(defn calculate-annualized-return [starting-value ending-value start-date end-date]
  (let [return (/ (- ending-value starting-value) starting-value)
        number-of-days (util/number-of-days-between start-date end-date)
       ]
    (- (math/pow (+ 1 return) (/ 365 number-of-days)) 1)
  )
)

; Calculates the volatility of a given list of prices (expected input: portfolio value list)
(defn volatility [prices]
  (let [daily-returns (:arithmetic-returns (calculate-returns prices))
        volatility (* 100 (util/std-dev daily-returns))
       ]
    volatility
  )
)

; Calculates the volatility for a given sliding window-size
(defn rolling-volatility [prices window-size]
  (let [returns (:arithmetic-returns (calculate-returns prices))]
    (->> returns
         (partition window-size 1)
         (map util/std-dev)
      	 (map #(* 100 %))
    )
  )
)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;cim_portfolio.portfolio/rolling-volatility</span>","value":"#'cim_portfolio.portfolio/rolling-volatility"}
;; <=

;; @@
(def test-prices [100 105 110 103 108 115])

(println test-prices)

(:arithmetic-returns (calculate-returns test-prices)) ;; Daily returns (as percentage of change)

(rolling-volatility test-prices 3)
;; @@
;; ->
;;; [100 105 110 103 108 115]
;;; 
;; <-
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>6.493157758793351</span>","value":"6.493157758793351"},{"type":"html","content":"<span class='clj-double'>6.450191958030683</span>","value":"6.450191958030683"},{"type":"html","content":"<span class='clj-double'>6.993904375922838</span>","value":"6.993904375922838"}],"value":"(6.493157758793351 6.450191958030683 6.993904375922838)"}
;; <=

;; @@
(calculate-returns test-prices)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:cumulative-return</span>","value":":cumulative-return"},{"type":"html","content":"<span class='clj-double'>0.1397619423751591</span>","value":"0.1397619423751591"}],"value":"[:cumulative-return 0.1397619423751591]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:arithmetic-returns</span>","value":":arithmetic-returns"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>0.050000000000000044</span>","value":"0.050000000000000044"},{"type":"html","content":"<span class='clj-double'>0.047619047619047894</span>","value":"0.047619047619047894"},{"type":"html","content":"<span class='clj-double'>-0.0636363636363636</span>","value":"-0.0636363636363636"},{"type":"html","content":"<span class='clj-double'>0.048543689320388106</span>","value":"0.048543689320388106"},{"type":"html","content":"<span class='clj-double'>0.0648148148148151</span>","value":"0.0648148148148151"}],"value":"[0.050000000000000044 0.047619047619047894 -0.0636363636363636 0.048543689320388106 0.0648148148148151]"}],"value":"[:arithmetic-returns [0.050000000000000044 0.047619047619047894 -0.0636363636363636 0.048543689320388106 0.0648148148148151]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:log-returns</span>","value":":log-returns"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>0.04879016416943205</span>","value":"0.04879016416943205"},{"type":"html","content":"<span class='clj-double'>0.04652001563489312</span>","value":"0.04652001563489312"},{"type":"html","content":"<span class='clj-double'>-0.06575137756278042</span>","value":"-0.06575137756278042"},{"type":"html","content":"<span class='clj-double'>0.04740223889458369</span>","value":"0.04740223889458369"},{"type":"html","content":"<span class='clj-double'>0.06280090123903065</span>","value":"0.06280090123903065"}],"value":"[0.04879016416943205 0.04652001563489312 -0.06575137756278042 0.04740223889458369 0.06280090123903065]"}],"value":"[:log-returns [0.04879016416943205 0.04652001563489312 -0.06575137756278042 0.04740223889458369 0.06280090123903065]]"}],"value":"{:cumulative-return 0.1397619423751591, :arithmetic-returns [0.050000000000000044 0.047619047619047894 -0.0636363636363636 0.048543689320388106 0.0648148148148151], :log-returns [0.04879016416943205 0.04652001563489312 -0.06575137756278042 0.04740223889458369 0.06280090123903065]}"}
;; <=

;; @@
(calculate-annualized-return 2000 2500 "2023-10-16" "2024-04-27")
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-double'>0.5217057952294997</span>","value":"0.5217057952294997"}
;; <=

;; **
;;; ### YFinance API
;; **

;; @@
(client/get-ticker-price-all "SPY" "2024-10-10")
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-11&quot;</span>","value":"\"2024-10-11\""},{"type":"html","content":"<span class='clj-double'>576.049987793</span>","value":"576.049987793"},{"type":"html","content":"<span class='clj-double'>579.5800170898</span>","value":"579.5800170898"}],"value":"[\"2024-10-11\" 576.049987793 579.5800170898]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-14&quot;</span>","value":"\"2024-10-14\""},{"type":"html","content":"<span class='clj-double'>581.2199707031</span>","value":"581.2199707031"},{"type":"html","content":"<span class='clj-double'>584.3200073242</span>","value":"584.3200073242"}],"value":"[\"2024-10-14\" 581.2199707031 584.3200073242]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-15&quot;</span>","value":"\"2024-10-15\""},{"type":"html","content":"<span class='clj-double'>584.5900268555</span>","value":"584.5900268555"},{"type":"html","content":"<span class='clj-double'>579.7800292969</span>","value":"579.7800292969"}],"value":"[\"2024-10-15\" 584.5900268555 579.7800292969]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-16&quot;</span>","value":"\"2024-10-16\""},{"type":"html","content":"<span class='clj-double'>579.7800292969</span>","value":"579.7800292969"},{"type":"html","content":"<span class='clj-double'>582.299987793</span>","value":"582.299987793"}],"value":"[\"2024-10-16\" 579.7800292969 582.299987793]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-17&quot;</span>","value":"\"2024-10-17\""},{"type":"html","content":"<span class='clj-double'>585.9099731445</span>","value":"585.9099731445"},{"type":"html","content":"<span class='clj-double'>582.3499755859</span>","value":"582.3499755859"}],"value":"[\"2024-10-17\" 585.9099731445 582.3499755859]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-18&quot;</span>","value":"\"2024-10-18\""},{"type":"html","content":"<span class='clj-double'>584.0700073242</span>","value":"584.0700073242"},{"type":"html","content":"<span class='clj-double'>584.5900268555</span>","value":"584.5900268555"}],"value":"[\"2024-10-18\" 584.0700073242 584.5900268555]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-21&quot;</span>","value":"\"2024-10-21\""},{"type":"html","content":"<span class='clj-double'>583.8499755859</span>","value":"583.8499755859"},{"type":"html","content":"<span class='clj-double'>583.6300048828</span>","value":"583.6300048828"}],"value":"[\"2024-10-21\" 583.8499755859 583.6300048828]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-22&quot;</span>","value":"\"2024-10-22\""},{"type":"html","content":"<span class='clj-double'>581.049987793</span>","value":"581.049987793"},{"type":"html","content":"<span class='clj-double'>583.3200073242</span>","value":"583.3200073242"}],"value":"[\"2024-10-22\" 581.049987793 583.3200073242]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-23&quot;</span>","value":"\"2024-10-23\""},{"type":"html","content":"<span class='clj-double'>581.2600097656</span>","value":"581.2600097656"},{"type":"html","content":"<span class='clj-double'>577.9899902344</span>","value":"577.9899902344"}],"value":"[\"2024-10-23\" 581.2600097656 577.9899902344]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-24&quot;</span>","value":"\"2024-10-24\""},{"type":"html","content":"<span class='clj-double'>579.9799804688</span>","value":"579.9799804688"},{"type":"html","content":"<span class='clj-double'>579.2399902344</span>","value":"579.2399902344"}],"value":"[\"2024-10-24\" 579.9799804688 579.2399902344]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2024-10-25&quot;</span>","value":"\"2024-10-25\""},{"type":"html","content":"<span class='clj-double'>581.5100097656</span>","value":"581.5100097656"},{"type":"html","content":"<span class='clj-double'>579.0399780273</span>","value":"579.0399780273"}],"value":"[\"2024-10-25\" 581.5100097656 579.0399780273]"}],"value":"[[\"2024-10-11\" 576.049987793 579.5800170898] [\"2024-10-14\" 581.2199707031 584.3200073242] [\"2024-10-15\" 584.5900268555 579.7800292969] [\"2024-10-16\" 579.7800292969 582.299987793] [\"2024-10-17\" 585.9099731445 582.3499755859] [\"2024-10-18\" 584.0700073242 584.5900268555] [\"2024-10-21\" 583.8499755859 583.6300048828] [\"2024-10-22\" 581.049987793 583.3200073242] [\"2024-10-23\" 581.2600097656 577.9899902344] [\"2024-10-24\" 579.9799804688 579.2399902344] [\"2024-10-25\" 581.5100097656 579.0399780273]]"}
;; <=

;; **
;;; ### Portfolio Processing Section
;; **

;; @@
(defn analyze-portfolio [data]
  (loop [cash 0.0
         portfolio {}
         portfolio-value {}
         current-value 0.0
         stock-performance {}
         cash-invested {}
         cash-invested-by-date {}
         data (rest data)]
    (if (empty? data)
      [cash portfolio portfolio-value current-value cash-invested cash-invested-by-date stock-performance]
      (let [[date action amount ticker] (first data)
            ticker-prices (client/get-ticker-price-all ticker (util/parse-date date))
            executed-date (first (first ticker-prices))				; gets the date the buy/sell order is executed
            ]
        (cond
          (= (clojure.string/lower-case action) "buy")
          (if (pos? (Double. amount))
            (let [price (second (first ticker-prices))        	; Gets open price of next trading day
                  currPrice (nth (last ticker-prices) 2)		; Gets adj close price of latest day
                  prices (mapv #(nth % 2) ticker-prices)       	; Extracts the prices from ticker-prices
                  amounts (repeatedly (count prices) #(Double. amount))	; Creates a sequence of amounts matching the number of prices
                  trading-dates (mapv #(first %) ticker-prices)
                  ]
              (recur (- cash (* (Double. amount) price))
                     (assoc portfolio ticker (+ (get portfolio ticker 0) (Double. amount)))
                     (merge-with + portfolio-value (zipmap (map first ticker-prices) (map #(- % (* (Double. amount) price))(map * prices amounts)))) ; Updates portfolio-value with the calculated values
                     (+ current-value (* (Double. amount) currPrice))
                     
                     (assoc stock-performance ticker (calculate-returns-with-corresponding-date prices trading-dates))
                     (assoc cash-invested ticker (+ (get cash-invested ticker 0) (* (Double. amount) price)))
                     (assoc cash-invested-by-date executed-date (assoc cash-invested ticker (+ (get cash-invested ticker 0) (* (Double. amount) price))))
                     (rest data)))
            (recur cash portfolio portfolio-value current-value cash-invested cash-invested-by-date stock-performance (rest data)))

          (= (clojure.string/lower-case action) "sell")
          (let [price (second (first ticker-prices))
                currPrice (second (last ticker-prices))
                prices (map second ticker-prices)
                amounts (repeatedly (count prices) #(Double. amount))
                trading-dates (mapv #(first %) ticker-prices)
                ]
            (recur (+ cash (* (Double. amount) price))
                   (assoc portfolio ticker (- (get portfolio ticker 0) (Double. amount)))
                   (merge-with + portfolio-value (zipmap (map first ticker-prices) (map #(- % (* (Double. amount) price))(map * prices amounts)))) ; Updates portfolio-value with the calculated values
                   (- current-value (* (Double. amount) currPrice))
                   
                   (assoc stock-performance ticker (calculate-returns-with-corresponding-date prices trading-dates))
                   (assoc cash-invested ticker (- (get cash-invested ticker 0) (* (Double. amount) price)))
                   (assoc cash-invested-by-date executed-date (assoc cash-invested ticker (- (get cash-invested ticker 0) (* (Double. amount) price))))
                   (rest data)))
          )))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;cim_portfolio.portfolio/analyze-portfolio</span>","value":"#'cim_portfolio.portfolio/analyze-portfolio"}
;; <=

;; @@
(def portfolio-options {
                        :starting-cash 1000000
                       }
)

(def view-options {
                   :show-individual-stock-performance-by-day 	false
                   :show-cumulative-portfolio-return-by-day		true
                   :show-portfolio-value-by-day					true
                  }
)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;cim_portfolio.portfolio/view-options</span>","value":"#'cim_portfolio.portfolio/view-options"}
;; <=

;; @@
;; Please enter the relative paths of 1 or more CSV files (in a list) containing your trades below:

(def input-files ["examples/testPortfolio1.csv" "examples/testPortfolio.csv"])

(let [data (util/read-multiple-csv input-files)
      [cash portfolio portfolio-value current-value cash-invested cash-invested-by-date stock-performance] (analyze-portfolio data)
      sorted-portfolio-value 	(map #(vector (first %) (+ (:starting-cash portfolio-options) (second %))) (util/sort-map-by-date portfolio-value))
      cash-invested-by-dates 	(into [] cash-invested-by-date)
      current-portfolio-value 	(+ (:starting-cash portfolio-options) (+ cash current-value))
      annualized-return 		(calculate-annualized-return (:starting-cash portfolio-options) current-portfolio-value (first (first sorted-portfolio-value)) (last (last sorted-portfolio-value)))
      cumulative-portfolio-return (calculate-portfolio-return cash-invested stock-performance)
      returns-by-date 			(zipmap (map #(first %) cash-invested-by-date)(mapv #(calculate-portfolio-return-for-given-date (second %) stock-performance (first %)) cash-invested-by-dates))
      volatility 				(volatility (map second sorted-portfolio-value))
      ]
  (def portfolio-value-by-day sorted-portfolio-value)
  
  (println "Current Portfolio Value: $" (format "%.2f" current-portfolio-value) "\n")
  
  (println "Annualized Return of portfolio:" (format "%.2f" (* annualized-return 100)) "%\n")
  (println "Volatility of portfolio:" (format "%.4f" volatility) "%\n")
  (println "Annualized volatility of portfolio:" (format "%.4f" (* (Math/sqrt 252) volatility)) "%\n")
  (println "Cash On Hand (excluding value of stocks): $" (format "%.2f"(+ (:starting-cash portfolio-options) cash)) "\n")
  (println "Portfolio (units held of each stock):" portfolio "\n")
  (println "Cash invested in each stock: " cash-invested "\n")
  (println "Cumulative Portfolio Return: " cumulative-portfolio-return "\n")
  
  (println "----------------------------------")
  (if (:show-cumulative-portfolio-return-by-day view-options) (println "Portfolio Return by date: \n" returns-by-date))
  (println "----------------------------------\n")
  
  (println "----------------------------------")
  (println "Portfolio Value Day-by-Day: ")
  (if (:show-portfolio-value-by-day view-options) 
    (run! println (map #(vector (first %) (format "%.2f" (second %))) sorted-portfolio-value))
    (println "Omitting...")
  )
  (println "----------------------------------\n")
  
  (println "----------------------------------")
  (println "Individual Stock Performance: ")
  (if (:show-individual-stock-performance-by-day view-options) 
    (clojure.pprint/pprint stock-performance)
    (println "Omitting...")
  )
  (println "----------------------------------\n")
)
;; @@
;; ->
;;; Current Portfolio Value: $ 1028785.71 
;;; 
;;; Annualized Return of portfolio: 2.78 %
;;; 
;;; Volatility of portfolio: 0.0992 %
;;; 
;;; Annualized volatility of portfolio: 1.5753 %
;;; 
;;; Cash On Hand (excluding value of stocks): $ 866643.17 
;;; 
;;; Portfolio (units held of each stock): {IEF 100.0, NVDA 70.0, SHY 170.0, RSP 35.0, SPY 150.0, GOOG 50.0, TSLA -30.0, GSG 250.0, AGG 300.0} 
;;; 
;;; Cash invested in each stock:  {IEF 9070.99990845, NVDA 4817.129821775, SHY 13787.499618528002, RSP 4944.7999572755, SPY 65155.500793454994, GOOG 7172.49984741, TSLA -6015.600128175, GSG 5449.999809275, AGG 28974.00054933} 
;;; 
;;; Cumulative Portfolio Return:  0.19377052150550803 
;;; 
;;; ----------------------------------
;;; Portfolio Return by date: 
;;;  {2024-02-16 0.48893998370528935, 2024-02-26 0.34077952497983927, 2024-03-01 0.24731241706053522, 2024-03-11 0.5303867497767554, 2023-10-16 0.2639994359215858, 2023-11-06 0.21405529199353857, 2023-12-04 0.05477216973161249}
;;; ----------------------------------
;;; 
;;; ----------------------------------
;;; Portfolio Value Day-by-Day: 
;;; [2023-10-16 999220.14]
;;; [2023-10-17 999152.81]
;;; [2023-10-18 998461.13]
;;; [2023-10-19 997987.84]
;;; [2023-10-20 997463.99]
;;; [2023-10-23 997403.54]
;;; [2023-10-24 997761.36]
;;; [2023-10-25 997031.39]
;;; [2023-10-26 996597.20]
;;; [2023-10-27 996373.45]
;;; [2023-10-30 996864.50]
;;; [2023-10-31 997141.67]
;;; [2023-11-01 997700.74]
;;; [2023-11-02 998658.41]
;;; [2023-11-03 999196.78]
;;; [2023-11-06 998469.41]
;;; [2023-11-07 998550.33]
;;; [2023-11-08 998552.34]
;;; [2023-11-09 997873.81]
;;; [2023-11-10 998994.87]
;;; [2023-11-13 999014.09]
;;; [2023-11-14 1000591.39]
;;; [2023-11-15 1000623.53]
;;; [2023-11-16 1000625.72]
;;; [2023-11-17 1000823.68]
;;; [2023-11-20 1001441.46]
;;; [2023-11-21 1001330.47]
;;; [2023-11-22 1001559.12]
;;; [2023-11-24 1001506.51]
;;; [2023-11-27 1001406.57]
;;; [2023-11-28 1001610.18]
;;; [2023-11-29 1001709.05]
;;; [2023-11-30 1001866.73]
;;; [2023-12-01 1002420.06]
;;; [2023-12-04 1000980.68]
;;; [2023-12-05 1001149.97]
;;; [2023-12-06 1000846.51]
;;; [2023-12-07 1001414.76]
;;; [2023-12-08 1001543.93]
;;; [2023-12-11 1001852.18]
;;; [2023-12-12 1002176.48]
;;; [2023-12-13 1003844.90]
;;; [2023-12-14 1004572.14]
;;; [2023-12-15 1004346.46]
;;; [2023-12-18 1004703.34]
;;; [2023-12-19 1005282.53]
;;; [2023-12-20 1004331.06]
;;; [2023-12-21 1005077.22]
;;; [2023-12-22 1005175.07]
;;; [2023-12-26 1005633.33]
;;; [2023-12-27 1006004.22]
;;; [2023-12-28 1005866.34]
;;; [2023-12-29 1005538.12]
;;; [2024-01-02 1004903.73]
;;; [2024-01-03 1004389.83]
;;; [2024-01-04 1003960.30]
;;; [2024-01-05 1004001.63]
;;; [2024-01-08 1005107.41]
;;; [2024-01-09 1005023.85]
;;; [2024-01-10 1005321.53]
;;; [2024-01-11 1005576.27]
;;; [2024-01-12 1005728.99]
;;; [2024-01-16 1005084.42]
;;; [2024-01-17 1004519.74]
;;; [2024-01-18 1005183.63]
;;; [2024-01-19 1006099.34]
;;; [2024-01-22 1006404.01]
;;; [2024-01-23 1006543.92]
;;; [2024-01-24 1006542.74]
;;; [2024-01-25 1007254.58]
;;; [2024-01-26 1007153.82]
;;; [2024-01-29 1007885.34]
;;; [2024-01-30 1007934.60]
;;; [2024-01-31 1006842.79]
;;; [2024-02-01 1008012.59]
;;; [2024-02-02 1008273.83]
;;; [2024-02-05 1007630.59]
;;; [2024-02-06 1008127.51]
;;; [2024-02-07 1008713.73]
;;; [2024-02-08 1008714.88]
;;; [2024-02-09 1009129.09]
;;; [2024-02-12 1009160.03]
;;; [2024-02-13 1007627.91]
;;; [2024-02-14 1008466.97]
;;; [2024-02-15 1009192.04]
;;; [2024-02-16 1008522.97]
;;; [2024-02-20 1007808.16]
;;; [2024-02-21 1007585.11]
;;; [2024-02-22 1010315.70]
;;; [2024-02-23 1010489.16]
;;; [2024-02-26 1009928.39]
;;; [2024-02-27 1010104.92]
;;; [2024-02-28 1009842.40]
;;; [2024-02-29 1010476.62]
;;; [2024-03-01 1011719.19]
;;; [2024-03-04 1011572.24]
;;; [2024-03-05 1010549.12]
;;; [2024-03-06 1011193.84]
;;; [2024-03-07 1012462.91]
;;; [2024-03-08 1011752.36]
;;; [2024-03-11 1011443.97]
;;; [2024-03-12 1012909.90]
;;; [2024-03-13 1012698.36]
;;; [2024-03-14 1011942.08]
;;; [2024-03-15 1011064.52]
;;; [2024-03-18 1012251.98]
;;; [2024-03-19 1012845.07]
;;; [2024-03-20 1013961.50]
;;; [2024-03-21 1014502.62]
;;; [2024-03-22 1014554.02]
;;; [2024-03-25 1014474.52]
;;; [2024-03-26 1014464.93]
;;; [2024-03-27 1015139.71]
;;; [2024-03-28 1014964.96]
;;; [2024-04-01 1014696.67]
;;; [2024-04-02 1013649.80]
;;; [2024-04-03 1013777.25]
;;; [2024-04-04 1012640.32]
;;; [2024-04-05 1013441.80]
;;; [2024-04-08 1013517.42]
;;; [2024-04-09 1013737.58]
;;; [2024-04-10 1012414.12]
;;; [2024-04-11 1013574.46]
;;; [2024-04-12 1012260.85]
;;; [2024-04-15 1010595.39]
;;; [2024-04-16 1009934.36]
;;; [2024-04-17 1009365.00]
;;; [2024-04-18 1008886.12]
;;; [2024-04-19 1007289.77]
;;; [2024-04-22 1008083.91]
;;; [2024-04-23 1009683.91]
;;; [2024-04-24 1009990.26]
;;; [2024-04-25 1009483.10]
;;; [2024-04-26 1012016.92]
;;; [2024-04-29 1012846.43]
;;; [2024-04-30 1010954.75]
;;; [2024-05-01 1010240.04]
;;; [2024-05-02 1011597.22]
;;; [2024-05-03 1013185.04]
;;; [2024-05-06 1014565.78]
;;; [2024-05-07 1014756.21]
;;; [2024-05-08 1014194.18]
;;; [2024-05-09 1014794.55]
;;; [2024-05-10 1014751.87]
;;; [2024-05-13 1014818.52]
;;; [2024-05-14 1015529.91]
;;; [2024-05-15 1017529.82]
;;; [2024-05-16 1017269.66]
;;; [2024-05-17 1017197.98]
;;; [2024-05-20 1017653.06]
;;; [2024-05-21 1017956.18]
;;; [2024-05-22 1017744.29]
;;; [2024-05-23 1017846.16]
;;; [2024-05-24 1018676.09]
;;; [2024-05-28 1019656.39]
;;; [2024-05-29 1018887.38]
;;; [2024-05-30 1018064.34]
;;; [2024-05-31 1018835.71]
;;; [2024-06-03 1019597.98]
;;; [2024-06-04 1019922.20]
;;; [2024-06-05 1021859.87]
;;; [2024-06-06 1021998.83]
;;; [2024-06-07 1021218.66]
;;; [2024-06-10 1021685.68]
;;; [2024-06-11 1021984.06]
;;; [2024-06-12 1023354.77]
;;; [2024-06-13 1024731.89]
;;; [2024-06-14 1025045.34]
;;; [2024-06-17 1025397.79]
;;; [2024-06-18 1026366.39]
;;; [2024-06-20 1025865.17]
;;; [2024-06-21 1024975.18]
;;; [2024-06-24 1023965.58]
;;; [2024-06-25 1025138.84]
;;; [2024-06-26 1025254.30]
;;; [2024-06-27 1025549.38]
;;; [2024-06-28 1024934.05]
;;; [2024-07-01 1025030.95]
;;; [2024-07-02 1026165.27]
;;; [2024-07-03 1027870.73]
;;; [2024-07-05 1029188.13]
;;; [2024-07-08 1029328.55]
;;; [2024-07-09 1029824.59]
;;; [2024-07-10 1031670.97]
;;; [2024-07-11 1030331.67]
;;; [2024-07-12 1030113.65]
;;; [2024-07-15 1030842.11]
;;; [2024-07-16 1031156.31]
;;; [2024-07-17 1028737.06]
;;; [2024-07-18 1027995.77]
;;; [2024-07-19 1026780.00]
;;; [2024-07-22 1028327.48]
;;; [2024-07-23 1028419.26]
;;; [2024-07-24 1024114.48]
;;; [2024-07-25 1022920.10]
;;; [2024-07-26 1024292.21]
;;; [2024-07-29 1024377.19]
;;; [2024-07-30 1023438.46]
;;; [2024-07-31 1026473.40]
;;; [2024-08-01 1024654.80]
;;; [2024-08-02 1022305.74]
;;; [2024-08-05 1017495.05]
;;; [2024-08-06 1019159.15]
;;; [2024-08-07 1018130.63]
;;; [2024-08-08 1020410.51]
;;; [2024-08-09 1021156.41]
;;; [2024-08-12 1021788.27]
;;; [2024-08-13 1024272.12]
;;; [2024-08-14 1025034.32]
;;; [2024-08-15 1026786.47]
;;; [2024-08-16 1027578.80]
;;; [2024-08-19 1029396.44]
;;; [2024-08-20 1029470.75]
;;; [2024-08-21 1029806.13]
;;; [2024-08-22 1028493.57]
;;; [2024-08-23 1030013.98]
;;; [2024-08-26 1029816.10]
;;; [2024-08-27 1029720.92]
;;; [2024-08-28 1028744.11]
;;; [2024-08-29 1027719.75]
;;; [2024-08-30 1028564.61]
;;; [2024-09-03 1025563.53]
;;; [2024-09-04 1024867.73]
;;; [2024-09-05 1025262.51]
;;; [2024-09-06 1023424.28]
;;; [2024-09-09 1024129.71]
;;; [2024-09-10 1024947.02]
;;; [2024-09-11 1026991.14]
;;; [2024-09-12 1028395.93]
;;; [2024-09-13 1029297.44]
;;; [2024-09-16 1029383.82]
;;; [2024-09-17 1029400.66]
;;; [2024-09-18 1028713.56]
;;; [2024-09-19 1031051.17]
;;; [2024-09-20 1030960.99]
;;; [2024-09-23 1031155.11]
;;; [2024-09-24 1032382.81]
;;; [2024-09-25 1032282.22]
;;; [2024-09-26 1033078.66]
;;; [2024-09-27 1032796.71]
;;; [2024-09-30 1032996.22]
;;; [2024-10-01 1032236.88]
;;; [2024-10-02 1031735.33]
;;; [2024-10-03 1031893.03]
;;; [2024-10-04 1032852.98]
;;; [2024-10-07 1032103.93]
;;; [2024-10-08 1033424.93]
;;; [2024-10-09 1033865.33]
;;; [2024-10-10 1033888.98]
;;; [2024-10-11 1033967.73]
;;; [2024-10-14 1035078.93]
;;; [2024-10-15 1033841.43]
;;; [2024-10-16 1034641.13]
;;; [2024-10-17 1034603.07]
;;; [2024-10-18 1035051.88]
;;; [2024-10-21 1035125.23]
;;; [2024-10-22 1035257.88]
;;; [2024-10-23 1033765.43]
;;; [2024-10-24 1034906.83]
;;; [2024-10-25 1035385.17]
;;; ----------------------------------
;;; 
;;; ----------------------------------
;;; Individual Stock Performance: 
;;; Omitting...
;;; ----------------------------------
;;; 
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; ### Visualization
;;; 
;;; #### Portfolio Value
;; **

;; @@
(plot/list-plot (cons (:starting-cash portfolio-options) (map #(second %) portfolio-value-by-day)) :joined true :plot-size 800 :x-title "Day" :y-title "Portfolio Value (in $)" :color "#7f3b08")
;; @@
;; =>
;;; {"type":"vega","content":{"width":800,"height":494.4376,"padding":{"top":10,"left":80,"bottom":50,"right":10},"data":[{"name":"55843acf-861f-4bd0-ac9d-a25ac21bef8c","values":[{"x":0,"y":1000000},{"x":1,"y":999220.1367950445},{"x":2,"y":999152.8092193615},{"x":3,"y":998461.13075257},{"x":4,"y":997987.841873163},{"x":5,"y":997463.993148803},{"x":6,"y":997403.5417938204},{"x":7,"y":997761.363143911},{"x":8,"y":997031.393203727},{"x":9,"y":996597.204895013},{"x":10,"y":996373.451080323},{"x":11,"y":996864.5040130585},{"x":12,"y":997141.665954587},{"x":13,"y":997700.7432556195},{"x":14,"y":998658.4088897675},{"x":15,"y":999196.7804718055},{"x":16,"y":998469.41040039},{"x":17,"y":998550.329513541},{"x":18,"y":998552.339401247},{"x":19,"y":997873.8078880215},{"x":20,"y":998994.871005998},{"x":21,"y":999014.091739647},{"x":22,"y":1000591.388282771},{"x":23,"y":1000623.5310172825},{"x":24,"y":1000625.7247733965},{"x":25,"y":1000823.6843872035},{"x":26,"y":1001441.458835595},{"x":27,"y":1001330.470237728},{"x":28,"y":1001559.117832188},{"x":29,"y":1001506.514987935},{"x":30,"y":1001406.57112122},{"x":31,"y":1001610.181999211},{"x":32,"y":1001709.045372003},{"x":33,"y":1001866.7337417575},{"x":34,"y":1002420.0617027165},{"x":35,"y":1000980.6774329985},{"x":36,"y":1001149.969367974},{"x":37,"y":1000846.51239394},{"x":38,"y":1001414.7557449276},{"x":39,"y":1001543.9335441485},{"x":40,"y":1001852.178478222},{"x":41,"y":1002176.478748307},{"x":42,"y":1003844.897880534},{"x":43,"y":1004572.1411323325},{"x":44,"y":1004346.460590335},{"x":45,"y":1004703.3382034065},{"x":46,"y":1005282.525558462},{"x":47,"y":1004331.0564994595},{"x":48,"y":1005077.2209929985},{"x":49,"y":1005175.072727169},{"x":50,"y":1005633.326129909},{"x":51,"y":1006004.217681864},{"x":52,"y":1005866.3442611425},{"x":53,"y":1005538.1168937396},{"x":54,"y":1004903.7309837205},{"x":55,"y":1004389.833793618},{"x":56,"y":1003960.2985572756},{"x":57,"y":1004001.629047367},{"x":58,"y":1005107.4134826445},{"x":59,"y":1005023.8524246115},{"x":60,"y":1005321.5280151285},{"x":61,"y":1005576.2745284811},{"x":62,"y":1005728.990669225},{"x":63,"y":1005084.41799161},{"x":64,"y":1004519.7433471555},{"x":65,"y":1005183.6267280345},{"x":66,"y":1006099.3394279135},{"x":67,"y":1006404.007682779},{"x":68,"y":1006543.9176940965},{"x":69,"y":1006542.738265968},{"x":70,"y":1007254.5843314835},{"x":71,"y":1007153.817481986},{"x":72,"y":1007885.3350829905},{"x":73,"y":1007934.600677457},{"x":74,"y":1006842.7889442325},{"x":75,"y":1008012.589912378},{"x":76,"y":1008273.8297462295},{"x":77,"y":1007630.5906867685},{"x":78,"y":1008127.5120544184},{"x":79,"y":1008713.7289619305},{"x":80,"y":1008714.883937818},{"x":81,"y":1009129.0903091165},{"x":82,"y":1009160.032157869},{"x":83,"y":1007627.909641234},{"x":84,"y":1008466.970119459},{"x":85,"y":1009192.0438575585},{"x":86,"y":1008522.96573639},{"x":87,"y":1007808.1648635685},{"x":88,"y":1007585.107803311},{"x":89,"y":1010315.704650837},{"x":90,"y":1010489.1637039115},{"x":91,"y":1009928.391952495},{"x":92,"y":1010104.921894075},{"x":93,"y":1009842.3989677225},{"x":94,"y":1010476.622714967},{"x":95,"y":1011719.1902732755},{"x":96,"y":1011572.243728624},{"x":97,"y":1010549.121513356},{"x":98,"y":1011193.8364410315},{"x":99,"y":1012462.912063592},{"x":100,"y":1011752.3649024765},{"x":101,"y":1011443.973369577},{"x":102,"y":1012909.8985862485},{"x":103,"y":1012698.3588028},{"x":104,"y":1011942.075977324},{"x":105,"y":1011064.5227622855},{"x":106,"y":1012251.9810294955},{"x":107,"y":1012845.0681114255},{"x":108,"y":1013961.50348661},{"x":109,"y":1014502.619075757},{"x":110,"y":1014554.015121436},{"x":111,"y":1014474.51965329},{"x":112,"y":1014464.931468931},{"x":113,"y":1015139.710864995},{"x":114,"y":1014964.956951107},{"x":115,"y":1014696.6745185805},{"x":116,"y":1013649.8009109495},{"x":117,"y":1013777.2488212365},{"x":118,"y":1012640.323715193},{"x":119,"y":1013441.7965698},{"x":120,"y":1013517.4199676205},{"x":121,"y":1013737.5806808436},{"x":122,"y":1012414.1172599355},{"x":123,"y":1013574.4559287931},{"x":124,"y":1012260.8471870295},{"x":125,"y":1010595.387401534},{"x":126,"y":1009934.360961873},{"x":127,"y":1009364.996795649},{"x":128,"y":1008886.1158370714},{"x":129,"y":1007289.7705268629},{"x":130,"y":1008083.905219998},{"x":131,"y":1009683.9146995505},{"x":132,"y":1009990.259685485},{"x":133,"y":1009483.1004714895},{"x":134,"y":1012016.9237327335},{"x":135,"y":1012846.4263915835},{"x":136,"y":1010954.753341688},{"x":137,"y":1010240.0383948985},{"x":138,"y":1011597.223548881},{"x":139,"y":1013185.040187815},{"x":140,"y":1014565.7773971325},{"x":141,"y":1014756.206111885},{"x":142,"y":1014194.179229727},{"x":143,"y":1014794.5548057475},{"x":144,"y":1014751.8748283365},{"x":145,"y":1014818.5218238765},{"x":146,"y":1015529.912376383},{"x":147,"y":1017529.82261656},{"x":148,"y":1017269.657859784},{"x":149,"y":1017197.980308535},{"x":150,"y":1017653.060913077},{"x":151,"y":1017956.1766242835},{"x":152,"y":1017744.289169293},{"x":153,"y":1017846.1614799285},{"x":154,"y":1018676.094837176},{"x":155,"y":1019656.386470771},{"x":156,"y":1018887.3810195735},{"x":157,"y":1018064.3377113235},{"x":158,"y":1018835.714797933},{"x":159,"y":1019597.975616454},{"x":160,"y":1019922.1965980195},{"x":161,"y":1021859.869232149},{"x":162,"y":1021998.827934247},{"x":163,"y":1021218.6572074655},{"x":164,"y":1021685.682201375},{"x":165,"y":1021984.059658048},{"x":166,"y":1023354.769973748},{"x":167,"y":1024731.894950832},{"x":168,"y":1025045.3446578966},{"x":169,"y":1025397.7928733635},{"x":170,"y":1026366.3943099795},{"x":171,"y":1025865.171546955},{"x":172,"y":1024975.1775550565},{"x":173,"y":1023965.5783653095},{"x":174,"y":1025138.835678076},{"x":175,"y":1025254.3016624264},{"x":176,"y":1025549.3800353865},{"x":177,"y":1024934.046421034},{"x":178,"y":1025030.946922296},{"x":179,"y":1026165.273380282},{"x":180,"y":1027870.732402765},{"x":181,"y":1029188.12526702},{"x":182,"y":1029328.5480880645},{"x":183,"y":1029824.5907020405},{"x":184,"y":1031670.965766902},{"x":185,"y":1030331.6715621755},{"x":186,"y":1030113.653411835},{"x":187,"y":1030842.1101951204},{"x":188,"y":1031156.311397551},{"x":189,"y":1028737.0569228985},{"x":190,"y":1027995.766086536},{"x":191,"y":1026779.997959113},{"x":192,"y":1028327.479839329},{"x":193,"y":1028419.25683973},{"x":194,"y":1024114.4772338825},{"x":195,"y":1022920.1029205126},{"x":196,"y":1024292.211437212},{"x":197,"y":1024377.19146728},{"x":198,"y":1023438.4631156655},{"x":199,"y":1026473.401737193},{"x":200,"y":1024654.7982978655},{"x":201,"y":1022305.738849594},{"x":202,"y":1017495.0505828775},{"x":203,"y":1019159.1489601095},{"x":204,"y":1018130.630226134},{"x":205,"y":1020410.505676265},{"x":206,"y":1021156.4136123515},{"x":207,"y":1021788.268775916},{"x":208,"y":1024272.12499617},{"x":209,"y":1025034.3247222715},{"x":210,"y":1026786.472988099},{"x":211,"y":1027578.8035201845},{"x":212,"y":1029396.4402389395},{"x":213,"y":1029470.747241934},{"x":214,"y":1029806.132755275},{"x":215,"y":1028493.5681724385},{"x":216,"y":1030013.978290539},{"x":217,"y":1029816.0992431149},{"x":218,"y":1029720.9162521116},{"x":219,"y":1028744.106712329},{"x":220,"y":1027719.7497367545},{"x":221,"y":1028564.6128463595},{"x":222,"y":1025563.5274886745},{"x":223,"y":1024867.734622943},{"x":224,"y":1025262.505855557},{"x":225,"y":1023424.2804718015},{"x":226,"y":1024129.710865013},{"x":227,"y":1024947.015075656},{"x":228,"y":1026991.1363601345},{"x":229,"y":1028395.9263992135},{"x":230,"y":1029297.4443435455},{"x":231,"y":1029383.8186454555},{"x":232,"y":1029400.6551551615},{"x":233,"y":1028713.5557174695},{"x":234,"y":1031051.172428107},{"x":235,"y":1030960.9858512465},{"x":236,"y":1031155.110282872},{"x":237,"y":1032382.807540877},{"x":238,"y":1032282.2165107465},{"x":239,"y":1033078.663311001},{"x":240,"y":1032796.7105674475},{"x":241,"y":1032996.222724891},{"x":242,"y":1032236.880683886},{"x":243,"y":1031735.327148442},{"x":244,"y":1031893.0315589975},{"x":245,"y":1032852.9759025495},{"x":246,"y":1032103.9292716956},{"x":247,"y":1033424.927310909},{"x":248,"y":1033865.3311538645},{"x":249,"y":1033888.980026239},{"x":250,"y":1033967.732810947},{"x":251,"y":1035078.933353406},{"x":252,"y":1033841.433334324},{"x":253,"y":1034641.1277961566},{"x":254,"y":1034603.073234521},{"x":255,"y":1035051.8822288455},{"x":256,"y":1035125.2315330515},{"x":257,"y":1035257.8800392055},{"x":258,"y":1033765.427532173},{"x":259,"y":1034906.828231782},{"x":260,"y":1035385.1745605204}]}],"marks":[{"type":"line","from":{"data":"55843acf-861f-4bd0-ac9d-a25ac21bef8c"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#7f3b08"},"strokeWidth":{"value":3},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"55843acf-861f-4bd0-ac9d-a25ac21bef8c","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"55843acf-861f-4bd0-ac9d-a25ac21bef8c","field":"data.y"}}],"axes":[{"type":"x","scale":"x","title":"Day","titleOffset":40,"grid":true},{"type":"y","scale":"y","title":"Portfolio Value (in $)","titleOffset":65,"grid":true}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 800, :height 494.4376, :padding {:top 10, :left 80, :bottom 50, :right 10}, :data [{:name \"55843acf-861f-4bd0-ac9d-a25ac21bef8c\", :values ({:x 0, :y 1000000} {:x 1, :y 999220.1367950445} {:x 2, :y 999152.8092193615} {:x 3, :y 998461.13075257} {:x 4, :y 997987.841873163} {:x 5, :y 997463.993148803} {:x 6, :y 997403.5417938204} {:x 7, :y 997761.363143911} {:x 8, :y 997031.393203727} {:x 9, :y 996597.204895013} {:x 10, :y 996373.451080323} {:x 11, :y 996864.5040130585} {:x 12, :y 997141.665954587} {:x 13, :y 997700.7432556195} {:x 14, :y 998658.4088897675} {:x 15, :y 999196.7804718055} {:x 16, :y 998469.41040039} {:x 17, :y 998550.329513541} {:x 18, :y 998552.339401247} {:x 19, :y 997873.8078880215} {:x 20, :y 998994.871005998} {:x 21, :y 999014.091739647} {:x 22, :y 1000591.388282771} {:x 23, :y 1000623.5310172825} {:x 24, :y 1000625.7247733965} {:x 25, :y 1000823.6843872035} {:x 26, :y 1001441.458835595} {:x 27, :y 1001330.470237728} {:x 28, :y 1001559.117832188} {:x 29, :y 1001506.514987935} {:x 30, :y 1001406.57112122} {:x 31, :y 1001610.181999211} {:x 32, :y 1001709.045372003} {:x 33, :y 1001866.7337417575} {:x 34, :y 1002420.0617027165} {:x 35, :y 1000980.6774329985} {:x 36, :y 1001149.969367974} {:x 37, :y 1000846.51239394} {:x 38, :y 1001414.7557449276} {:x 39, :y 1001543.9335441485} {:x 40, :y 1001852.178478222} {:x 41, :y 1002176.478748307} {:x 42, :y 1003844.897880534} {:x 43, :y 1004572.1411323325} {:x 44, :y 1004346.460590335} {:x 45, :y 1004703.3382034065} {:x 46, :y 1005282.525558462} {:x 47, :y 1004331.0564994595} {:x 48, :y 1005077.2209929985} {:x 49, :y 1005175.072727169} {:x 50, :y 1005633.326129909} {:x 51, :y 1006004.217681864} {:x 52, :y 1005866.3442611425} {:x 53, :y 1005538.1168937396} {:x 54, :y 1004903.7309837205} {:x 55, :y 1004389.833793618} {:x 56, :y 1003960.2985572756} {:x 57, :y 1004001.629047367} {:x 58, :y 1005107.4134826445} {:x 59, :y 1005023.8524246115} {:x 60, :y 1005321.5280151285} {:x 61, :y 1005576.2745284811} {:x 62, :y 1005728.990669225} {:x 63, :y 1005084.41799161} {:x 64, :y 1004519.7433471555} {:x 65, :y 1005183.6267280345} {:x 66, :y 1006099.3394279135} {:x 67, :y 1006404.007682779} {:x 68, :y 1006543.9176940965} {:x 69, :y 1006542.738265968} {:x 70, :y 1007254.5843314835} {:x 71, :y 1007153.817481986} {:x 72, :y 1007885.3350829905} {:x 73, :y 1007934.600677457} {:x 74, :y 1006842.7889442325} {:x 75, :y 1008012.589912378} {:x 76, :y 1008273.8297462295} {:x 77, :y 1007630.5906867685} {:x 78, :y 1008127.5120544184} {:x 79, :y 1008713.7289619305} {:x 80, :y 1008714.883937818} {:x 81, :y 1009129.0903091165} {:x 82, :y 1009160.032157869} {:x 83, :y 1007627.909641234} {:x 84, :y 1008466.970119459} {:x 85, :y 1009192.0438575585} {:x 86, :y 1008522.96573639} {:x 87, :y 1007808.1648635685} {:x 88, :y 1007585.107803311} {:x 89, :y 1010315.704650837} {:x 90, :y 1010489.1637039115} {:x 91, :y 1009928.391952495} {:x 92, :y 1010104.921894075} {:x 93, :y 1009842.3989677225} {:x 94, :y 1010476.622714967} {:x 95, :y 1011719.1902732755} {:x 96, :y 1011572.243728624} {:x 97, :y 1010549.121513356} {:x 98, :y 1011193.8364410315} {:x 99, :y 1012462.912063592} {:x 100, :y 1011752.3649024765} {:x 101, :y 1011443.973369577} {:x 102, :y 1012909.8985862485} {:x 103, :y 1012698.3588028} {:x 104, :y 1011942.075977324} {:x 105, :y 1011064.5227622855} {:x 106, :y 1012251.9810294955} {:x 107, :y 1012845.0681114255} {:x 108, :y 1013961.50348661} {:x 109, :y 1014502.619075757} {:x 110, :y 1014554.015121436} {:x 111, :y 1014474.51965329} {:x 112, :y 1014464.931468931} {:x 113, :y 1015139.710864995} {:x 114, :y 1014964.956951107} {:x 115, :y 1014696.6745185805} {:x 116, :y 1013649.8009109495} {:x 117, :y 1013777.2488212365} {:x 118, :y 1012640.323715193} {:x 119, :y 1013441.7965698} {:x 120, :y 1013517.4199676205} {:x 121, :y 1013737.5806808436} {:x 122, :y 1012414.1172599355} {:x 123, :y 1013574.4559287931} {:x 124, :y 1012260.8471870295} {:x 125, :y 1010595.387401534} {:x 126, :y 1009934.360961873} {:x 127, :y 1009364.996795649} {:x 128, :y 1008886.1158370714} {:x 129, :y 1007289.7705268629} {:x 130, :y 1008083.905219998} {:x 131, :y 1009683.9146995505} {:x 132, :y 1009990.259685485} {:x 133, :y 1009483.1004714895} {:x 134, :y 1012016.9237327335} {:x 135, :y 1012846.4263915835} {:x 136, :y 1010954.753341688} {:x 137, :y 1010240.0383948985} {:x 138, :y 1011597.223548881} {:x 139, :y 1013185.040187815} {:x 140, :y 1014565.7773971325} {:x 141, :y 1014756.206111885} {:x 142, :y 1014194.179229727} {:x 143, :y 1014794.5548057475} {:x 144, :y 1014751.8748283365} {:x 145, :y 1014818.5218238765} {:x 146, :y 1015529.912376383} {:x 147, :y 1017529.82261656} {:x 148, :y 1017269.657859784} {:x 149, :y 1017197.980308535} {:x 150, :y 1017653.060913077} {:x 151, :y 1017956.1766242835} {:x 152, :y 1017744.289169293} {:x 153, :y 1017846.1614799285} {:x 154, :y 1018676.094837176} {:x 155, :y 1019656.386470771} {:x 156, :y 1018887.3810195735} {:x 157, :y 1018064.3377113235} {:x 158, :y 1018835.714797933} {:x 159, :y 1019597.975616454} {:x 160, :y 1019922.1965980195} {:x 161, :y 1021859.869232149} {:x 162, :y 1021998.827934247} {:x 163, :y 1021218.6572074655} {:x 164, :y 1021685.682201375} {:x 165, :y 1021984.059658048} {:x 166, :y 1023354.769973748} {:x 167, :y 1024731.894950832} {:x 168, :y 1025045.3446578966} {:x 169, :y 1025397.7928733635} {:x 170, :y 1026366.3943099795} {:x 171, :y 1025865.171546955} {:x 172, :y 1024975.1775550565} {:x 173, :y 1023965.5783653095} {:x 174, :y 1025138.835678076} {:x 175, :y 1025254.3016624264} {:x 176, :y 1025549.3800353865} {:x 177, :y 1024934.046421034} {:x 178, :y 1025030.946922296} {:x 179, :y 1026165.273380282} {:x 180, :y 1027870.732402765} {:x 181, :y 1029188.12526702} {:x 182, :y 1029328.5480880645} {:x 183, :y 1029824.5907020405} {:x 184, :y 1031670.965766902} {:x 185, :y 1030331.6715621755} {:x 186, :y 1030113.653411835} {:x 187, :y 1030842.1101951204} {:x 188, :y 1031156.311397551} {:x 189, :y 1028737.0569228985} {:x 190, :y 1027995.766086536} {:x 191, :y 1026779.997959113} {:x 192, :y 1028327.479839329} {:x 193, :y 1028419.25683973} {:x 194, :y 1024114.4772338825} {:x 195, :y 1022920.1029205126} {:x 196, :y 1024292.211437212} {:x 197, :y 1024377.19146728} {:x 198, :y 1023438.4631156655} {:x 199, :y 1026473.401737193} {:x 200, :y 1024654.7982978655} {:x 201, :y 1022305.738849594} {:x 202, :y 1017495.0505828775} {:x 203, :y 1019159.1489601095} {:x 204, :y 1018130.630226134} {:x 205, :y 1020410.505676265} {:x 206, :y 1021156.4136123515} {:x 207, :y 1021788.268775916} {:x 208, :y 1024272.12499617} {:x 209, :y 1025034.3247222715} {:x 210, :y 1026786.472988099} {:x 211, :y 1027578.8035201845} {:x 212, :y 1029396.4402389395} {:x 213, :y 1029470.747241934} {:x 214, :y 1029806.132755275} {:x 215, :y 1028493.5681724385} {:x 216, :y 1030013.978290539} {:x 217, :y 1029816.0992431149} {:x 218, :y 1029720.9162521116} {:x 219, :y 1028744.106712329} {:x 220, :y 1027719.7497367545} {:x 221, :y 1028564.6128463595} {:x 222, :y 1025563.5274886745} {:x 223, :y 1024867.734622943} {:x 224, :y 1025262.505855557} {:x 225, :y 1023424.2804718015} {:x 226, :y 1024129.710865013} {:x 227, :y 1024947.015075656} {:x 228, :y 1026991.1363601345} {:x 229, :y 1028395.9263992135} {:x 230, :y 1029297.4443435455} {:x 231, :y 1029383.8186454555} {:x 232, :y 1029400.6551551615} {:x 233, :y 1028713.5557174695} {:x 234, :y 1031051.172428107} {:x 235, :y 1030960.9858512465} {:x 236, :y 1031155.110282872} {:x 237, :y 1032382.807540877} {:x 238, :y 1032282.2165107465} {:x 239, :y 1033078.663311001} {:x 240, :y 1032796.7105674475} {:x 241, :y 1032996.222724891} {:x 242, :y 1032236.880683886} {:x 243, :y 1031735.327148442} {:x 244, :y 1031893.0315589975} {:x 245, :y 1032852.9759025495} {:x 246, :y 1032103.9292716956} {:x 247, :y 1033424.927310909} {:x 248, :y 1033865.3311538645} {:x 249, :y 1033888.980026239} {:x 250, :y 1033967.732810947} {:x 251, :y 1035078.933353406} {:x 252, :y 1033841.433334324} {:x 253, :y 1034641.1277961566} {:x 254, :y 1034603.073234521} {:x 255, :y 1035051.8822288455} {:x 256, :y 1035125.2315330515} {:x 257, :y 1035257.8800392055} {:x 258, :y 1033765.427532173} {:x 259, :y 1034906.828231782} {:x 260, :y 1035385.1745605204})}], :marks [{:type \"line\", :from {:data \"55843acf-861f-4bd0-ac9d-a25ac21bef8c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#7f3b08\"}, :strokeWidth {:value 3}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"55843acf-861f-4bd0-ac9d-a25ac21bef8c\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"55843acf-861f-4bd0-ac9d-a25ac21bef8c\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\", :title \"Day\", :titleOffset 40, :grid true} {:type \"y\", :scale \"y\", :title \"Portfolio Value (in $)\", :titleOffset 65, :grid true}]}}"}
;; <=

;; **
;;; #### 30 Day Rolling Volatility
;; **

;; @@
(plot/list-plot (rolling-volatility (map second portfolio-value-by-day) 21) :joined true :plot-size 800 :x-title "Time" :y-title "Portfolio Volatility" :color "red") ;; 21 trading days in a month therefore 21 window-size used
;; @@
;; =>
;;; {"type":"vega","content":{"width":800,"height":494.4376,"padding":{"top":10,"left":80,"bottom":50,"right":10},"data":[{"name":"4885f3eb-e723-4e49-b468-953aa45c1282","values":[{"x":0,"y":0.06481363143614076},{"x":1,"y":0.06474796454249102},{"x":2,"y":0.06238927526371595},{"x":3,"y":0.06098758444639901},{"x":4,"y":0.059888457570704295},{"x":5,"y":0.0600033296090148},{"x":6,"y":0.05988438402393655},{"x":7,"y":0.05644408796402792},{"x":8,"y":0.054970566586295226},{"x":9,"y":0.053988118620603535},{"x":10,"y":0.0537856405282725},{"x":11,"y":0.05379732672915528},{"x":12,"y":0.05377149965448485},{"x":13,"y":0.06215878377228144},{"x":14,"y":0.06140387658103952},{"x":15,"y":0.05922441253855201},{"x":16,"y":0.06003820665286205},{"x":17,"y":0.05995978942436493},{"x":18,"y":0.05698807960082486},{"x":19,"y":0.05296603173267938},{"x":20,"y":0.06226646014005845},{"x":21,"y":0.05542748430775908},{"x":22,"y":0.0560709034457753},{"x":23,"y":0.05604994640982129},{"x":24,"y":0.056669091501320074},{"x":25,"y":0.0611706143932446},{"x":26,"y":0.062265804209973005},{"x":27,"y":0.0622785071739561},{"x":28,"y":0.06235100384123942},{"x":29,"y":0.062077332093479404},{"x":30,"y":0.06256095812587195},{"x":31,"y":0.06359126302609593},{"x":32,"y":0.06602316794472969},{"x":33,"y":0.0668124666283044},{"x":34,"y":0.05835888163306422},{"x":35,"y":0.05839561382941888},{"x":36,"y":0.06109982986704382},{"x":37,"y":0.0608044824410735},{"x":38,"y":0.06085548060345034},{"x":39,"y":0.060809711361013125},{"x":40,"y":0.06071780205246421},{"x":41,"y":0.05261776719354875},{"x":42,"y":0.051965307398427155},{"x":43,"y":0.053637345811569204},{"x":44,"y":0.05656245858789406},{"x":45,"y":0.055635895484338935},{"x":46,"y":0.05070764707730228},{"x":47,"y":0.04858168127249863},{"x":48,"y":0.050539885595477285},{"x":49,"y":0.05002786410799153},{"x":50,"y":0.051669522529886276},{"x":51,"y":0.05142134814279523},{"x":52,"y":0.05690420041073595},{"x":53,"y":0.059384588627927},{"x":54,"y":0.057460738524143046},{"x":55,"y":0.05874880945241659},{"x":56,"y":0.05906513795427349},{"x":57,"y":0.056093032792994685},{"x":58,"y":0.0559322437652074},{"x":59,"y":0.05611196071527814},{"x":60,"y":0.05617711184626693},{"x":61,"y":0.06718344370908445},{"x":62,"y":0.06686215259629884},{"x":63,"y":0.06577943892757424},{"x":64,"y":0.06767154000784423},{"x":65,"y":0.06789238958358952},{"x":66,"y":0.06799964642341479},{"x":67,"y":0.0893582538763637},{"x":68,"y":0.08926403367547635},{"x":69,"y":0.08983170127479652},{"x":70,"y":0.08968503592009942},{"x":71,"y":0.08903955865699333},{"x":72,"y":0.08979064314226601},{"x":73,"y":0.08846495884280728},{"x":74,"y":0.08615231190358394},{"x":75,"y":0.08986342232754017},{"x":76,"y":0.08887763102260855},{"x":77,"y":0.09177686281706846},{"x":78,"y":0.09340103211596726},{"x":79,"y":0.09387188157722141},{"x":80,"y":0.09807212184386642},{"x":81,"y":0.09839144661700834},{"x":82,"y":0.09308133770490779},{"x":83,"y":0.0947165361950421},{"x":84,"y":0.09665144586252561},{"x":85,"y":0.09526605137044976},{"x":86,"y":0.09478527164334156},{"x":87,"y":0.0941774035097991},{"x":88,"y":0.07679732730789145},{"x":89,"y":0.07703630608083785},{"x":90,"y":0.07530707205282564},{"x":91,"y":0.0759379518676055},{"x":92,"y":0.07567450769214405},{"x":93,"y":0.07589905357349785},{"x":94,"y":0.07658010918355466},{"x":95,"y":0.07639008103015064},{"x":96,"y":0.07722673001468904},{"x":97,"y":0.0778328503939876},{"x":98,"y":0.07324740330851587},{"x":99,"y":0.07125033951144563},{"x":100,"y":0.07715032761051754},{"x":101,"y":0.07463515511102307},{"x":102,"y":0.0799658008359321},{"x":103,"y":0.08620744719252754},{"x":104,"y":0.08533455190348699},{"x":105,"y":0.08116224597536072},{"x":106,"y":0.0797343782370581},{"x":107,"y":0.07956435243640511},{"x":108,"y":0.08110058909225237},{"x":109,"y":0.09079221206069117},{"x":110,"y":0.09148785830068515},{"x":111,"y":0.09157810168717112},{"x":112,"y":0.10800966674421231},{"x":113,"y":0.11003959856345148},{"x":114,"y":0.11661082937813821},{"x":115,"y":0.11562949870080794},{"x":116,"y":0.12009981173428427},{"x":117,"y":0.1229980895246065},{"x":118,"y":0.12538371460403255},{"x":119,"y":0.12541749777836517},{"x":120,"y":0.12605795079527696},{"x":121,"y":0.12282413975478526},{"x":122,"y":0.12054042032000048},{"x":123,"y":0.11649870542083601},{"x":124,"y":0.10977072846666411},{"x":125,"y":0.11402139035228595},{"x":126,"y":0.11297016882731938},{"x":127,"y":0.1117943311135151},{"x":128,"y":0.10224371548522891},{"x":129,"y":0.10208342043209839},{"x":130,"y":0.09970264814037252},{"x":131,"y":0.09987846260739915},{"x":132,"y":0.09825427101730494},{"x":133,"y":0.08705615479650833},{"x":134,"y":0.08962454641193222},{"x":135,"y":0.07929298179707213},{"x":136,"y":0.07605360280451078},{"x":137,"y":0.07344089460994314},{"x":138,"y":0.06815367580098282},{"x":139,"y":0.07310619168052376},{"x":140,"y":0.0731692449496516},{"x":141,"y":0.07457688589945423},{"x":142,"y":0.07439714971400546},{"x":143,"y":0.07393417083354764},{"x":144,"y":0.07676613599732732},{"x":145,"y":0.07928117759263946},{"x":146,"y":0.0710102605362502},{"x":147,"y":0.06964235615135217},{"x":148,"y":0.06988703200615737},{"x":149,"y":0.07268179394776149},{"x":150,"y":0.07764460456130473},{"x":151,"y":0.08205013869185776},{"x":152,"y":0.08398668807999174},{"x":153,"y":0.08339730746628299},{"x":154,"y":0.08203456396744388},{"x":155,"y":0.08113166816137238},{"x":156,"y":0.07737318337906131},{"x":157,"y":0.07871175709685478},{"x":158,"y":0.08345424033277214},{"x":159,"y":0.08568579864090464},{"x":160,"y":0.07894850016000776},{"x":161,"y":0.07884673030050866},{"x":162,"y":0.08029706342314148},{"x":163,"y":0.08924299063702795},{"x":164,"y":0.09022387636470217},{"x":165,"y":0.08786861572258617},{"x":166,"y":0.08484029390051066},{"x":167,"y":0.10259706045902103},{"x":168,"y":0.10431902577427545},{"x":169,"y":0.10623255975190193},{"x":170,"y":0.1103071100115974},{"x":171,"y":0.10799874945529687},{"x":172,"y":0.14215608129465476},{"x":173,"y":0.14185540715045522},{"x":174,"y":0.14527864229459775},{"x":175,"y":0.14511360219082897},{"x":176,"y":0.14587167179326166},{"x":177,"y":0.16022311695900046},{"x":178,"y":0.16317969359312925},{"x":179,"y":0.16501424158949904},{"x":180,"y":0.18731489417770714},{"x":181,"y":0.1928066225756044},{"x":182,"y":0.19186554354069058},{"x":183,"y":0.1948062368010981},{"x":184,"y":0.19578683181692655},{"x":185,"y":0.19707160803830812},{"x":186,"y":0.20526523817165784},{"x":187,"y":0.20613709644464068},{"x":188,"y":0.2048199682835242},{"x":189,"y":0.20510529802878316},{"x":190,"y":0.20682589109123614},{"x":191,"y":0.20438115674784332},{"x":192,"y":0.20446619089596255},{"x":193,"y":0.18293090129390133},{"x":194,"y":0.18212138469097322},{"x":195,"y":0.1809370070936438},{"x":196,"y":0.18106213746616007},{"x":197,"y":0.18116721551686707},{"x":198,"y":0.1718385099154772},{"x":199,"y":0.1672817957757183},{"x":200,"y":0.17238580083889946},{"x":201,"y":0.13369000644748436},{"x":202,"y":0.13039772437280936},{"x":203,"y":0.1353163701077696},{"x":204,"y":0.1279369488288097},{"x":205,"y":0.1280911894620843},{"x":206,"y":0.1338499540222729},{"x":207,"y":0.12699551266556763},{"x":208,"y":0.12731596224120323},{"x":209,"y":0.12252164936842921},{"x":210,"y":0.1216214927289212},{"x":211,"y":0.11625848300928641},{"x":212,"y":0.1266811382684349},{"x":213,"y":0.12659110074734942},{"x":214,"y":0.12288457245600733},{"x":215,"y":0.12145107012670699},{"x":216,"y":0.12135080750323662},{"x":217,"y":0.1220761893965927},{"x":218,"y":0.11989076995865386},{"x":219,"y":0.1167888355680263},{"x":220,"y":0.11787687243963031},{"x":221,"y":0.09592305069335966},{"x":222,"y":0.09342592249097162},{"x":223,"y":0.09435186059624331},{"x":224,"y":0.08458873567493658},{"x":225,"y":0.08654885332732982},{"x":226,"y":0.08613912759347345},{"x":227,"y":0.07844186384072041},{"x":228,"y":0.07478610657933789},{"x":229,"y":0.07572485631122888},{"x":230,"y":0.08214682357977118},{"x":231,"y":0.08293025173990887},{"x":232,"y":0.08058002951470265},{"x":233,"y":0.06652341261543689},{"x":234,"y":0.06628889312710354},{"x":235,"y":0.06630364932910376},{"x":236,"y":0.07113302163538474},{"x":237,"y":0.0745215188618777},{"x":238,"y":0.07347005860254927}]}],"marks":[{"type":"line","from":{"data":"4885f3eb-e723-4e49-b468-953aa45c1282"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":3},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"4885f3eb-e723-4e49-b468-953aa45c1282","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"4885f3eb-e723-4e49-b468-953aa45c1282","field":"data.y"}}],"axes":[{"type":"x","scale":"x","title":"Time","titleOffset":40,"grid":true},{"type":"y","scale":"y","title":"Portfolio Volatility","titleOffset":65,"grid":true}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 800, :height 494.4376, :padding {:top 10, :left 80, :bottom 50, :right 10}, :data [{:name \"4885f3eb-e723-4e49-b468-953aa45c1282\", :values ({:x 0, :y 0.06481363143614076} {:x 1, :y 0.06474796454249102} {:x 2, :y 0.06238927526371595} {:x 3, :y 0.06098758444639901} {:x 4, :y 0.059888457570704295} {:x 5, :y 0.0600033296090148} {:x 6, :y 0.05988438402393655} {:x 7, :y 0.05644408796402792} {:x 8, :y 0.054970566586295226} {:x 9, :y 0.053988118620603535} {:x 10, :y 0.0537856405282725} {:x 11, :y 0.05379732672915528} {:x 12, :y 0.05377149965448485} {:x 13, :y 0.06215878377228144} {:x 14, :y 0.06140387658103952} {:x 15, :y 0.05922441253855201} {:x 16, :y 0.06003820665286205} {:x 17, :y 0.05995978942436493} {:x 18, :y 0.05698807960082486} {:x 19, :y 0.05296603173267938} {:x 20, :y 0.06226646014005845} {:x 21, :y 0.05542748430775908} {:x 22, :y 0.0560709034457753} {:x 23, :y 0.05604994640982129} {:x 24, :y 0.056669091501320074} {:x 25, :y 0.0611706143932446} {:x 26, :y 0.062265804209973005} {:x 27, :y 0.0622785071739561} {:x 28, :y 0.06235100384123942} {:x 29, :y 0.062077332093479404} {:x 30, :y 0.06256095812587195} {:x 31, :y 0.06359126302609593} {:x 32, :y 0.06602316794472969} {:x 33, :y 0.0668124666283044} {:x 34, :y 0.05835888163306422} {:x 35, :y 0.05839561382941888} {:x 36, :y 0.06109982986704382} {:x 37, :y 0.0608044824410735} {:x 38, :y 0.06085548060345034} {:x 39, :y 0.060809711361013125} {:x 40, :y 0.06071780205246421} {:x 41, :y 0.05261776719354875} {:x 42, :y 0.051965307398427155} {:x 43, :y 0.053637345811569204} {:x 44, :y 0.05656245858789406} {:x 45, :y 0.055635895484338935} {:x 46, :y 0.05070764707730228} {:x 47, :y 0.04858168127249863} {:x 48, :y 0.050539885595477285} {:x 49, :y 0.05002786410799153} {:x 50, :y 0.051669522529886276} {:x 51, :y 0.05142134814279523} {:x 52, :y 0.05690420041073595} {:x 53, :y 0.059384588627927} {:x 54, :y 0.057460738524143046} {:x 55, :y 0.05874880945241659} {:x 56, :y 0.05906513795427349} {:x 57, :y 0.056093032792994685} {:x 58, :y 0.0559322437652074} {:x 59, :y 0.05611196071527814} {:x 60, :y 0.05617711184626693} {:x 61, :y 0.06718344370908445} {:x 62, :y 0.06686215259629884} {:x 63, :y 0.06577943892757424} {:x 64, :y 0.06767154000784423} {:x 65, :y 0.06789238958358952} {:x 66, :y 0.06799964642341479} {:x 67, :y 0.0893582538763637} {:x 68, :y 0.08926403367547635} {:x 69, :y 0.08983170127479652} {:x 70, :y 0.08968503592009942} {:x 71, :y 0.08903955865699333} {:x 72, :y 0.08979064314226601} {:x 73, :y 0.08846495884280728} {:x 74, :y 0.08615231190358394} {:x 75, :y 0.08986342232754017} {:x 76, :y 0.08887763102260855} {:x 77, :y 0.09177686281706846} {:x 78, :y 0.09340103211596726} {:x 79, :y 0.09387188157722141} {:x 80, :y 0.09807212184386642} {:x 81, :y 0.09839144661700834} {:x 82, :y 0.09308133770490779} {:x 83, :y 0.0947165361950421} {:x 84, :y 0.09665144586252561} {:x 85, :y 0.09526605137044976} {:x 86, :y 0.09478527164334156} {:x 87, :y 0.0941774035097991} {:x 88, :y 0.07679732730789145} {:x 89, :y 0.07703630608083785} {:x 90, :y 0.07530707205282564} {:x 91, :y 0.0759379518676055} {:x 92, :y 0.07567450769214405} {:x 93, :y 0.07589905357349785} {:x 94, :y 0.07658010918355466} {:x 95, :y 0.07639008103015064} {:x 96, :y 0.07722673001468904} {:x 97, :y 0.0778328503939876} {:x 98, :y 0.07324740330851587} {:x 99, :y 0.07125033951144563} {:x 100, :y 0.07715032761051754} {:x 101, :y 0.07463515511102307} {:x 102, :y 0.0799658008359321} {:x 103, :y 0.08620744719252754} {:x 104, :y 0.08533455190348699} {:x 105, :y 0.08116224597536072} {:x 106, :y 0.0797343782370581} {:x 107, :y 0.07956435243640511} {:x 108, :y 0.08110058909225237} {:x 109, :y 0.09079221206069117} {:x 110, :y 0.09148785830068515} {:x 111, :y 0.09157810168717112} {:x 112, :y 0.10800966674421231} {:x 113, :y 0.11003959856345148} {:x 114, :y 0.11661082937813821} {:x 115, :y 0.11562949870080794} {:x 116, :y 0.12009981173428427} {:x 117, :y 0.1229980895246065} {:x 118, :y 0.12538371460403255} {:x 119, :y 0.12541749777836517} {:x 120, :y 0.12605795079527696} {:x 121, :y 0.12282413975478526} {:x 122, :y 0.12054042032000048} {:x 123, :y 0.11649870542083601} {:x 124, :y 0.10977072846666411} {:x 125, :y 0.11402139035228595} {:x 126, :y 0.11297016882731938} {:x 127, :y 0.1117943311135151} {:x 128, :y 0.10224371548522891} {:x 129, :y 0.10208342043209839} {:x 130, :y 0.09970264814037252} {:x 131, :y 0.09987846260739915} {:x 132, :y 0.09825427101730494} {:x 133, :y 0.08705615479650833} {:x 134, :y 0.08962454641193222} {:x 135, :y 0.07929298179707213} {:x 136, :y 0.07605360280451078} {:x 137, :y 0.07344089460994314} {:x 138, :y 0.06815367580098282} {:x 139, :y 0.07310619168052376} {:x 140, :y 0.0731692449496516} {:x 141, :y 0.07457688589945423} {:x 142, :y 0.07439714971400546} {:x 143, :y 0.07393417083354764} {:x 144, :y 0.07676613599732732} {:x 145, :y 0.07928117759263946} {:x 146, :y 0.0710102605362502} {:x 147, :y 0.06964235615135217} {:x 148, :y 0.06988703200615737} {:x 149, :y 0.07268179394776149} {:x 150, :y 0.07764460456130473} {:x 151, :y 0.08205013869185776} {:x 152, :y 0.08398668807999174} {:x 153, :y 0.08339730746628299} {:x 154, :y 0.08203456396744388} {:x 155, :y 0.08113166816137238} {:x 156, :y 0.07737318337906131} {:x 157, :y 0.07871175709685478} {:x 158, :y 0.08345424033277214} {:x 159, :y 0.08568579864090464} {:x 160, :y 0.07894850016000776} {:x 161, :y 0.07884673030050866} {:x 162, :y 0.08029706342314148} {:x 163, :y 0.08924299063702795} {:x 164, :y 0.09022387636470217} {:x 165, :y 0.08786861572258617} {:x 166, :y 0.08484029390051066} {:x 167, :y 0.10259706045902103} {:x 168, :y 0.10431902577427545} {:x 169, :y 0.10623255975190193} {:x 170, :y 0.1103071100115974} {:x 171, :y 0.10799874945529687} {:x 172, :y 0.14215608129465476} {:x 173, :y 0.14185540715045522} {:x 174, :y 0.14527864229459775} {:x 175, :y 0.14511360219082897} {:x 176, :y 0.14587167179326166} {:x 177, :y 0.16022311695900046} {:x 178, :y 0.16317969359312925} {:x 179, :y 0.16501424158949904} {:x 180, :y 0.18731489417770714} {:x 181, :y 0.1928066225756044} {:x 182, :y 0.19186554354069058} {:x 183, :y 0.1948062368010981} {:x 184, :y 0.19578683181692655} {:x 185, :y 0.19707160803830812} {:x 186, :y 0.20526523817165784} {:x 187, :y 0.20613709644464068} {:x 188, :y 0.2048199682835242} {:x 189, :y 0.20510529802878316} {:x 190, :y 0.20682589109123614} {:x 191, :y 0.20438115674784332} {:x 192, :y 0.20446619089596255} {:x 193, :y 0.18293090129390133} {:x 194, :y 0.18212138469097322} {:x 195, :y 0.1809370070936438} {:x 196, :y 0.18106213746616007} {:x 197, :y 0.18116721551686707} {:x 198, :y 0.1718385099154772} {:x 199, :y 0.1672817957757183} {:x 200, :y 0.17238580083889946} {:x 201, :y 0.13369000644748436} {:x 202, :y 0.13039772437280936} {:x 203, :y 0.1353163701077696} {:x 204, :y 0.1279369488288097} {:x 205, :y 0.1280911894620843} {:x 206, :y 0.1338499540222729} {:x 207, :y 0.12699551266556763} {:x 208, :y 0.12731596224120323} {:x 209, :y 0.12252164936842921} {:x 210, :y 0.1216214927289212} {:x 211, :y 0.11625848300928641} {:x 212, :y 0.1266811382684349} {:x 213, :y 0.12659110074734942} {:x 214, :y 0.12288457245600733} {:x 215, :y 0.12145107012670699} {:x 216, :y 0.12135080750323662} {:x 217, :y 0.1220761893965927} {:x 218, :y 0.11989076995865386} {:x 219, :y 0.1167888355680263} {:x 220, :y 0.11787687243963031} {:x 221, :y 0.09592305069335966} {:x 222, :y 0.09342592249097162} {:x 223, :y 0.09435186059624331} {:x 224, :y 0.08458873567493658} {:x 225, :y 0.08654885332732982} {:x 226, :y 0.08613912759347345} {:x 227, :y 0.07844186384072041} {:x 228, :y 0.07478610657933789} {:x 229, :y 0.07572485631122888} {:x 230, :y 0.08214682357977118} {:x 231, :y 0.08293025173990887} {:x 232, :y 0.08058002951470265} {:x 233, :y 0.06652341261543689} {:x 234, :y 0.06628889312710354} {:x 235, :y 0.06630364932910376} {:x 236, :y 0.07113302163538474} {:x 237, :y 0.0745215188618777} {:x 238, :y 0.07347005860254927})}], :marks [{:type \"line\", :from {:data \"4885f3eb-e723-4e49-b468-953aa45c1282\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 3}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"4885f3eb-e723-4e49-b468-953aa45c1282\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"4885f3eb-e723-4e49-b468-953aa45c1282\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\", :title \"Time\", :titleOffset 40, :grid true} {:type \"y\", :scale \"y\", :title \"Portfolio Volatility\", :titleOffset 65, :grid true}]}}"}
;; <=
